{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\shade\\\\OneDrive\\\\Documents\\\\DevProject\\\\ecommerce-backend-API-master\\\\src\\\\ecommerce\\\\src\\\\components\\\\OrderHistory\\\\orderHistory.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport \"./orderHistory.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst OrderHistory = () => {\n  _s();\n  const [orders, setOrders] = useState([]);\n  const history = useHistory();\n  useEffect(() => {\n    // Fetch orders when the component mounts\n    fetchOrders();\n  }, []);\n  const fetchOrders = async () => {\n    try {\n      // Get the token from local storage\n      const token = localStorage.getItem(\"token\");\n\n      // Decode the payload of the token\n      const payload = token.split(\".\")[1];\n      const decodedPayload = atob(payload);\n\n      // Parse the payload as JSON to get user information\n      const user = JSON.parse(decodedPayload);\n\n      // Extract the user ID\n      const userId = user.user.id;\n      console.log(\"Fetching orders for user with ID:\", userId);\n\n      // Fetch orders for the user\n      const response = await fetch(`http://localhost:3000/api/v1/orders/${userId}`, {\n        method: \"GET\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Bearer ${token}`\n        }\n      });\n      if (response.ok) {\n        const ordersData = await response.json();\n        console.log(\"Fetched orders successfully:\", ordersData);\n        setOrders(ordersData);\n      } else {\n        console.error(\"Failed to fetch orders.\");\n      }\n    } catch (error) {\n      console.error(\"Error fetching orders:\", error);\n    }\n  };\n  const handleBackToOrder = () => {\n    history.push(\"/order\");\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"order-history-wrapper\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"order-history-header\",\n      children: \"Order History\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: handleBackToOrder,\n      className: \"back-to-order-button\",\n      children: \"Back to Order\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n      className: \"order-history-list\",\n      children: orders.map(order => /*#__PURE__*/_jsxDEV(\"li\", {\n        className: \"order-history-item\",\n        children: [\"Order ID: \", order.order_id, \", Total: $\", order.total]\n      }, order.order_id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 60,\n    columnNumber: 5\n  }, this);\n};\n_s(OrderHistory, \"iKEqWCaHeoeFHBodqXk+7a/U16o=\", false, function () {\n  return [useHistory];\n});\n_c = OrderHistory;\nexport default OrderHistory;\nvar _c;\n$RefreshReg$(_c, \"OrderHistory\");","map":{"version":3,"names":["React","useState","useEffect","useHistory","jsxDEV","_jsxDEV","OrderHistory","_s","orders","setOrders","history","fetchOrders","token","localStorage","getItem","payload","split","decodedPayload","atob","user","JSON","parse","userId","id","console","log","response","fetch","method","headers","Authorization","ok","ordersData","json","error","handleBackToOrder","push","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","map","order","order_id","total","_c","$RefreshReg$"],"sources":["C:/Users/shade/OneDrive/Documents/DevProject/ecommerce-backend-API-master/src/ecommerce/src/components/OrderHistory/orderHistory.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport \"./orderHistory.css\";\r\n\r\nconst OrderHistory = () => {\r\n  const [orders, setOrders] = useState([]);\r\n  const history = useHistory();\r\n\r\n  useEffect(() => {\r\n    // Fetch orders when the component mounts\r\n    fetchOrders();\r\n  }, []);\r\n\r\n  const fetchOrders = async () => {\r\n    try {\r\n      // Get the token from local storage\r\n      const token = localStorage.getItem(\"token\");\r\n\r\n      // Decode the payload of the token\r\n      const payload = token.split(\".\")[1];\r\n      const decodedPayload = atob(payload);\r\n\r\n      // Parse the payload as JSON to get user information\r\n      const user = JSON.parse(decodedPayload);\r\n\r\n      // Extract the user ID\r\n      const userId = user.user.id;\r\n\r\n      console.log(\"Fetching orders for user with ID:\", userId);\r\n\r\n      // Fetch orders for the user\r\n      const response = await fetch(\r\n        `http://localhost:3000/api/v1/orders/${userId}`,\r\n        {\r\n          method: \"GET\",\r\n          headers: {\r\n            \"Content-Type\": \"application/json\",\r\n            Authorization: `Bearer ${token}`,\r\n          },\r\n        }\r\n      );\r\n\r\n      if (response.ok) {\r\n        const ordersData = await response.json();\r\n        console.log(\"Fetched orders successfully:\", ordersData);\r\n        setOrders(ordersData);\r\n      } else {\r\n        console.error(\"Failed to fetch orders.\");\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Error fetching orders:\", error);\r\n    }\r\n  };\r\n\r\n  const handleBackToOrder = () => {\r\n    history.push(\"/order\");\r\n  };\r\n\r\n  return (\r\n    <div className=\"order-history-wrapper\">\r\n      <h2 className=\"order-history-header\">Order History</h2>\r\n      <button onClick={handleBackToOrder} className=\"back-to-order-button\">\r\n        Back to Order\r\n      </button>\r\n      <ul className=\"order-history-list\">\r\n        {orders.map((order) => (\r\n          <li className=\"order-history-item\" key={order.order_id}>\r\n            Order ID: {order.order_id}, Total: ${order.total}\r\n          </li>\r\n        ))}\r\n      </ul>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default OrderHistory;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}